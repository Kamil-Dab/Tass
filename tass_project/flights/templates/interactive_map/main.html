{% extends "base.html" %}
{% load static %}

{% block head %}
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css">
<link rel="stylesheet" href="{% static 'styles/interactive_map.css' %}">
{% endblock head %}
{% block body %}
<div class="row m-3">
    <div class="col-8 map-container">
        <div id="map"></div>
    </div>
    <div class="col-4">
        <ul class="nav nav-tabs" id="myTab" role="tablist">
            <li class="nav-item" role="presentation">
              	<button class="nav-link active city-tab" id="ranking-tab" data-bs-toggle="tab" data-bs-target="#ranking-tab-pane" type="button" role="tab" aria-controls="ranking-tab-pane" aria-selected="true">Ranking</button>
            </li>
            <li class="nav-item" role="presentation">
              	<button class="nav-link city-tab" id="search-tab" data-bs-toggle="tab" data-bs-target="#search-tab-pane" type="button" role="tab" aria-controls="search-tab-pane" aria-selected="false">Search</button>
            </li>
            <li class="nav-item" role="presentation">
              	<button class="nav-link city-tab" id="heat-map-tab" data-bs-toggle="tab" data-bs-target="#heat-map-tab-pane" type="button" role="tab" aria-controls="heat-map-tab-pane" aria-selected="false">Heat map</button>
            </li>
            <li class="nav-item ms-auto" role="presentation">
              	<a class="btn btn-primary"type="button" href="{% url 'interactive_map' %}?recalculate_rating=1">Recalculate rating</a>
            </li>
        </ul>
		<div class="tab-content">
			<div class="tab-pane fade show active" id="ranking-tab-pane" role="tabpanel" aria-labelledby="ranking-tab" tabindex="0">
				{% include 'interactive_map/ranking_tab.html' %}
			</div>
			<div class="tab-pane fade" id="search-tab-pane" role="tabpanel" aria-labelledby="search-tab" tabindex="0">
				{% include 'interactive_map/search_tab.html' %}
			</div>
				<div class="tab-pane fade" id="heat-map-tab-pane" role="tabpanel" aria-labelledby="heat-map-tab" tabindex="0">
			</div>
		</div>
    </div>
</div>
{% endblock body %}

{% block javascript %}
<script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"></script>
<script src="{% static 'libraries/leaflet-heat.js' %}"></script>
<script type="module" src="{% static 'scripts/interactive_map.js' %}"></script>
{% endblock javascript %}
